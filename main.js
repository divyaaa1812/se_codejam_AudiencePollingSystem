(()=>{"use strict";class t{constructor(t){let{popupModalSelector:e}=t;this._popupModal=document.querySelector(e),this.closeModal=this.closeModal.bind(this)}openModal(){this._popupModal.classList.add("modal_opened"),this._setEventListeners()}closeModal(){this._popupModal.classList.remove("modal_opened"),this._removeEventListeners()}_handleEscClose=t=>{"Escape"===t.key&&this.closeModal()};_closeModalByClick=t=>{(t.target===t.currentTarget||t.target.classList.contains("modal__close-button"))&&this.closeModal()};_removeEventListeners(){window.removeEventListener("keydown",this._handleEscClose),this._popupModal.removeEventListener("mousedown",this._closeModalByClick),this._popupModal.querySelector(".modal__close-button").removeEventListener("click",this.closeModal)}_setEventListeners(){window.addEventListener("keydown",this._handleEscClose),this._popupModal.addEventListener("mousedown",this._closeModalByClick),this._popupModal.querySelector(".modal__close-button").addEventListener("click",this.closeModal)}}class e{constructor(t,e){let{title:o,description:i,option1:s,option2:n,option1Votes:r,option2Votes:l,image:a}=t;this._pollSelector=e,this._title=o,this._description=i,this._image=a,this._option1=s,this._option2=n,this._option1Votes=r,this._option2Votes=l,this._pollElement=document.querySelector(this._pollSelector).content.firstElementChild.cloneNode(!0)}_setEventListners(){this._optionsButton1.addEventListener("click",(t=>{this.vote("option1")})),this._optionsButton2.addEventListener("click",(t=>{this.vote("option2")}))}vote=t=>{"option1"===t?this._option1Votes++:this._option2Votes++,this.renderVotes()};_getImage(){return`./images/poll-image-${Math.floor(6*Math.random())+1}.jpg`}renderVotes(){this._option1VoteElement.textContent=`${this._option1Votes} ${this._option1Votes<=1?"vote":"votes"}`,this._option2VoteElement.textContent=`${this._option2Votes} ${this._option2Votes<=1?"vote":"votes"}`}getPoll(){return this._optionsButton1=this._pollElement.querySelector("#option-button-1"),this._optionsButton2=this._pollElement.querySelector("#option-button-2"),this._option1VoteElement=this._pollElement.querySelector("#poll-vote1"),this._option2VoteElement=this._pollElement.querySelector("#poll-vote2"),this._setEventListners(),this.renderVotes(),this._pollElement.querySelector(".poll__title").textContent=this._title,this._pollElement.querySelector(".poll__description").textContent=this._description,this._pollElement.querySelector(".poll__image").src=this._image,this._pollElement.querySelector("#poll-option1").textContent=this._option1,this._pollElement.querySelector("#poll-option2").textContent=this._option2,this._pollElement}}const o={inputElementSelector:".modal__text-input",submitButtonSelector:".modal__button",inactiveButtonSelector:"modal__button_disabled",inputErrorSelector:"modal__input-error_visible",errorSelectorHide:"modal__input-error-hide",errorSelector:"modal__input-error"},i=(document.querySelector(o.submitButtonSelector),document.querySelector("#add-new-poll")),s=document.querySelector("#add-new-poll-button");let n=null;function r(t,o){let{title:i,description:s,option1:n,option2:r,option1Votes:l,option2Votes:a,image:c}=t;return new e({title:i,description:s,option1:n,option2:r,option1Votes:l,option2Votes:a,image:c},o).getPoll()}n=new class{constructor(t,e){let{items:o,renderer:i}=t;this._items=o,this._renderer=i,this._selector=e,this._section=document.querySelector(this._selector)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._section.prepend(t)}}({items:[{title:"Favorite Halloween Creature",image:"https://img.freepik.com/free-vector/flat-design-halloween-background_52683-43036.jpg?w=1060&t=st=1698369489~exp=1698370089~hmac=900b309e6f9e548725a4b50d310c95b726a7562da91d017457d60ae5726f9fd8",description:"Halloween brings out all manner of creatures and spirits. From the dead of night to the light of the moon, which mythical being sends shivers down your spine the most? Cast your spine-chilling vote now!",option1:"ðŸ§›â€â™‚ï¸ Vampires",option1Votes:45,option2:"ðŸº Werewolves",option2Votes:40},{title:"Classic vs Modern Horror Movies",image:"https://img.freepik.com/free-vector/flat-background-halloween-celebration_23-2149698880.jpg?w=1060&t=st=1698369495~exp=1698370095~hmac=1c3c4c2e897fa89e8eed96da654b35ec816ecf1fbcf28cab9f38e15ae455b8b2",description:"Horror films have evolved over the years, from classic spine-tinglers to modern psychological thrillers. Which era of horror movies keeps you up at night? Make your eerie choice!",option1:"ðŸŽ¥ Classic Horrors",option1Votes:55,option2:"ðŸ“½ï¸ Modern Thrillers",option2Votes:50},{title:"Ideal Haunted Location",image:"https://img.freepik.com/free-vector/hand-drawn-flat-halloween-background_23-2149077569.jpg?w=1060&t=st=1698369662~exp=1698370262~hmac=9904434fbbd93064823019156dff8658c31eff95df1dc3ddc5b873a56612f5d8",description:"The allure of haunted places beckons many thrill-seekers. From abandoned mansions to eerie graveyards, which haunted location would you dare to visit on a Halloween night? Venture forth and vote!",option1:"ðŸšï¸ Haunted Mansion",option1Votes:53,option2:"âš°ï¸ Creepy Cemetery",option2Votes:46},{title:"Favorite Halloween Treat",image:"https://img.freepik.com/free-vector/halloween-cat-disguised-skull-character_24908-59552.jpg?w=740&t=st=1698369494~exp=1698370094~hmac=fdbdc2ffb68a3405a459b15ac66d8148394df14e37fd0a4ac90551e41bbb8f01",description:"Trick or treat! Halloween is incomplete without its share of sweet indulgences. From candy corn to chocolate bars, which treat satisfies your Halloween cravings? Share your sugary preference!",option1:"ðŸ¬ Candy Corn",option1Votes:44,option2:"ðŸ« Chocolate Bars",option2Votes:49},{title:"Best Halloween Costume Theme",image:"https://img.freepik.com/free-vector/halloween-illustration-with-big-glowing-moon-ball-night-sparkle-sky-bats-magic-forest-flat_1284-40788.jpg?w=740&t=st=1698369492~exp=1698370092~hmac=2fa387dc5b673ca17aadf7fad43e58089b6aa7d674d5b1115086ad8cbac672ab",description:"Dressing up for Halloween is a cherished tradition. Whether you like to keep it spooky or go for something funny, which costume theme wins your heart? Unleash your inner ghoul and cast your vote!",option1:"ðŸ’€ Spooky Skeletons",option1Votes:52,option2:"ðŸ¤¡ Funny Clowns",option2Votes:45},{title:"Halloween Battle: Trick or Treat!",image:"https://img.freepik.com/free-vector/drawn-halloween-background-with-scary-cemetery_52683-43546.jpg?w=1060&t=st=1698369490~exp=1698370090~hmac=f0de6cc55bf3018a87fb9fe380508e27c935d50a54ab7f4ff12c1d605e7a2175",description:"It's time to decide once and for all.",option1:"ðŸŽ­ Trick",option1Votes:60,option2:"ðŸ­ Treat",option2Votes:65}],renderer:t=>{n.addItem(r(t,"#poll-template"))}},".polls__list"),n.renderItems();const l=new class extends t{constructor(t,e){super({popupModalSelector:t}),this._handleFormSubmit=e,this.handleSubmit=this.handleSubmit.bind(this),this._inputFields=this._popupModal.querySelectorAll(".modal__text-input")}_getInputValues(){const t=Array.from(this._popupModal.querySelectorAll(".modal__text-input")),e={};for(const o of t)e[o.name]=o.value;return e}setInputValues(t){this._inputFields.forEach((e=>{e.value=t[e.name]}))}closeModal(){super.closeModal(),this._popupModal.querySelector(".modal__form-content").reset()}handleSubmit(){this._handleFormSubmit(this._getInputValues())}_removeEventListeners(){super._removeEventListeners(),this._popupModal.removeEventListener("submit",this.handleSubmit)}_setEventListeners(){super._setEventListeners(),this._popupModal.addEventListener("submit",this.handleSubmit)}}("#add-new-poll",(function(t){const e={...t,option1Votes:0,option2Votes:0};n.addItem(r(e,"#poll-template")),l.closeModal()}),".modal__button"),a=new class{constructor(t,e){this._form=e,this._inputElementSelector=t.inputElementSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonSelector=t.inactiveButtonSelector,this._inputErrorSelector=t.inputErrorSelector,this._errorSelectorHide=t.errorSelectorHide,this._errorSelector=t.errorSelector}_showInputError(t){const e=t.validationMessage;t.classList.add(this._inputErrorSelector);const o=this._form.querySelector(`#${t.id}+ .${this._errorSelector}`);o.textContent=e,o.classList.add(this._inputErrorSelector)}_hideInputError(t){t.classList.remove(this._inputErrorSelector);const e=this._form.querySelector(`#${t.id}+ .${this._errorSelector}`);e.classList.remove(this._inputErrorSelector),e.textContent=""}toggleInputError(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_enableButton(){this._buttonElement.classList.remove(this._inactiveButtonSelector),this._buttonElement.removeAttribute("disabled",!1)}disableButton(){this._buttonElement.classList.add(this._inactiveButtonSelector),this._buttonElement.setAttribute("disabled",!0)}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputElementSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this.toggleInputError(t),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}}(o,i);s.addEventListener("click",(function(){a.disableButton(),l.openModal()})),a.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixTQUFTLEtBQ3JDckIsS0FBS3VILGlCQUFpQk4sR0FDdEJqSCxLQUFLa0ksb0JBQW9CLEdBQ3pCLEdBRU4sQ0FFQUMsZ0JBQUFBLEdBQ0VuSSxLQUFLeUcsTUFBTXBGLGlCQUFpQixVQUFXUixJQUVyQ0EsRUFBSXVILGdCQUFnQixJQUV0QnBJLEtBQUtTLG9CQUNQLEdIL0NBNEgsRUFDQUEsR0FtQkZBLEVBQUFBLGlCQUEyQyxTQWhCM0MsV0FDRTlCLEVBQXdCeUIsZ0JBQ3hCN0MsRUFBZ0I3RSxXQUNsQixJQWdCQWlHLEVBQXdCNEIsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9yZW1vdGVjb2RlcnMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9yZW1vdGVjb2RlcnMvLi9zcmMvY29tcG9uZW50cy9Qb2xsLmpzIiwid2VicGFjazovL3JlbW90ZWNvZGVycy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcmVtb3RlY29kZXJzLy4vc3JjL3NjcmlwdHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcmVtb3RlY29kZXJzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9yZW1vdGVjb2RlcnMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3JlbW90ZWNvZGVycy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBNb2RhbFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwTW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWwgPSB0aGlzLmNsb3NlTW9kYWwuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW5Nb2RhbCgpIHtcclxuICAgIHRoaXMuX3BvcHVwTW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZU1vZGFsKCkge1xyXG4gICAgdGhpcy5fcG9wdXBNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VNb2RhbCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9jbG9zZU1vZGFsQnlDbGljayA9IChldnQpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQgfHxcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5jbG9zZU1vZGFsKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwTW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZU1vZGFsQnlDbGljayk7XHJcbiAgICB0aGlzLl9wb3B1cE1vZGFsXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIilcclxuICAgICAgLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlTW9kYWwpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZU1vZGFsQnlDbGljayk7XHJcbiAgICB0aGlzLl9wb3B1cE1vZGFsXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlTW9kYWwpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb2xsIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgdGl0bGUsIGRlc2NyaXB0aW9uLCBvcHRpb24xLCBvcHRpb24yLCBvcHRpb24xVm90ZXMsIG9wdGlvbjJWb3RlcywgaW1hZ2UgfSxcclxuICAgIHBvbGxTZWxlY3RvclxyXG4gICkge1xyXG4gICAgdGhpcy5fcG9sbFNlbGVjdG9yID0gcG9sbFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICB0aGlzLl9pbWFnZSA9IGltYWdlO1xyXG4gICAgdGhpcy5fb3B0aW9uMSA9IG9wdGlvbjE7XHJcbiAgICB0aGlzLl9vcHRpb24yID0gb3B0aW9uMjtcclxuICAgIHRoaXMuX29wdGlvbjFWb3RlcyA9IG9wdGlvbjFWb3RlcztcclxuICAgIHRoaXMuX29wdGlvbjJWb3RlcyA9IG9wdGlvbjJWb3RlcztcclxuXHJcbiAgICB0aGlzLl9wb2xsRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvbGxTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdG5lcnMoKSB7XHJcbiAgICB0aGlzLl9vcHRpb25zQnV0dG9uMS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy52b3RlKFwib3B0aW9uMVwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX29wdGlvbnNCdXR0b24yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLnZvdGUoXCJvcHRpb24yXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB2b3RlID0gKG9wdGlvbikgPT4ge1xyXG4gICAgaWYgKG9wdGlvbiA9PT0gXCJvcHRpb24xXCIpIHtcclxuICAgICAgdGhpcy5fb3B0aW9uMVZvdGVzKys7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9vcHRpb24yVm90ZXMrKztcclxuICAgIH1cclxuICAgIHRoaXMucmVuZGVyVm90ZXMoKTtcclxuICB9O1xyXG5cclxuICAvLyBfY2FsY1BlcmNlbnRPZlZvdGVzIChvcHRpb24xVm90ZXMsIG9wdGlvbjJWb3Rlcykge1xyXG4gIC8vICAgICBsZXQgb3B0aW9uMVZvdGluZ1BlcmNlbnRhZ2UgPSAwXHJcbiAgLy8gICAgIGxldCBvcHRpb24yVm90aW5nUGVyY2VudGFnZSA9IDBcclxuXHJcbiAgLy8gICAgIGlmIChvcHRpb24xVm90ZXMgIT09IDApIHtcclxuICAvLyAgICAgICAgIG9wdGlvbjFWb3RpbmdQZXJjZW50YWdlID0gTWF0aC5mbG9vcihvcHRpb24xVm90ZXMgLyAob3B0aW9uMVZvdGVzICsgb3B0aW9uMlZvdGVzKSAqIDEwMClcclxuICAvLyAgICAgfVxyXG5cclxuICAvLyAgICAgaWYgKG9wdGlvbjJWb3RlcyAhPT0gMCkge1xyXG4gIC8vICAgICAgICAgb3B0aW9uMlZvdGluZ1BlcmNlbnRhZ2UgPSBNYXRoLmZsb29yKG9wdGlvbjJWb3RlcyAvIChvcHRpb24xVm90ZXMgKyBvcHRpb24yVm90ZXMpICogMTAwKVxyXG4gIC8vICAgICB9XHJcblxyXG4gIC8vICAgICByZXR1cm4gW29wdGlvbjFWb3RpbmdQZXJjZW50YWdlLCBvcHRpb24yVm90aW5nUGVyY2VudGFnZV07XHJcbiAgLy8gfVxyXG5cclxuICBfZ2V0SW1hZ2UoKSB7XHJcbiAgICBjb25zdCByYW5kb20gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2KSArIDE7XHJcbiAgICByZXR1cm4gYC4vaW1hZ2VzL3BvbGwtaW1hZ2UtJHtyYW5kb219LmpwZ2A7XHJcbiAgfVxyXG5cclxuICByZW5kZXJWb3RlcygpIHtcclxuICAgIC8vIGNvbnN0IFtvcHRpb24xVm90ZXMsIG9wdGlvbjJWb3Rlc10gPSB0aGlzLl9jYWxjUGVyY2VudE9mVm90ZXModGhpcy5fb3B0aW9uMVZvdGVzLCB0aGlzLl9vcHRpb24yVm90ZXMpXHJcbiAgICB0aGlzLl9vcHRpb24xVm90ZUVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHt0aGlzLl9vcHRpb24xVm90ZXN9ICR7XHJcbiAgICAgIHRoaXMuX29wdGlvbjFWb3RlcyA8PSAxID8gXCJ2b3RlXCIgOiBcInZvdGVzXCJcclxuICAgIH1gO1xyXG4gICAgdGhpcy5fb3B0aW9uMlZvdGVFbGVtZW50LnRleHRDb250ZW50ID0gYCR7dGhpcy5fb3B0aW9uMlZvdGVzfSAke1xyXG4gICAgICB0aGlzLl9vcHRpb24yVm90ZXMgPD0gMSA/IFwidm90ZVwiIDogXCJ2b3Rlc1wiXHJcbiAgICB9YDtcclxuICB9XHJcblxyXG4gIGdldFBvbGwoKSB7XHJcbiAgICB0aGlzLl9vcHRpb25zQnV0dG9uMSA9IHRoaXMuX3BvbGxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3B0aW9uLWJ1dHRvbi0xXCIpO1xyXG4gICAgdGhpcy5fb3B0aW9uc0J1dHRvbjIgPSB0aGlzLl9wb2xsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI29wdGlvbi1idXR0b24tMlwiKTtcclxuICAgIHRoaXMuX29wdGlvbjFWb3RlRWxlbWVudCA9IHRoaXMuX3BvbGxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9sbC12b3RlMVwiKTtcclxuICAgIHRoaXMuX29wdGlvbjJWb3RlRWxlbWVudCA9IHRoaXMuX3BvbGxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9sbC12b3RlMlwiKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RuZXJzKCk7XHJcbiAgICB0aGlzLnJlbmRlclZvdGVzKCk7XHJcblxyXG4gICAgdGhpcy5fcG9sbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb2xsX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xyXG4gICAgdGhpcy5fcG9sbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb2xsX19kZXNjcmlwdGlvblwiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uO1xyXG4gICAgdGhpcy5fcG9sbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb2xsX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9pbWFnZTtcclxuICAgIHRoaXMuX3BvbGxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9sbC1vcHRpb24xXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fb3B0aW9uMTtcclxuICAgIHRoaXMuX3BvbGxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9sbC1vcHRpb24yXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fb3B0aW9uMjtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fcG9sbEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBwb2xsc0xpc3QgPSBbXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiRmF2b3JpdGUgSGFsbG93ZWVuIENyZWF0dXJlXCIsXHJcbiAgICBpbWFnZTpcclxuICAgICAgXCJodHRwczovL2ltZy5mcmVlcGlrLmNvbS9mcmVlLXZlY3Rvci9mbGF0LWRlc2lnbi1oYWxsb3dlZW4tYmFja2dyb3VuZF81MjY4My00MzAzNi5qcGc/dz0xMDYwJnQ9c3Q9MTY5ODM2OTQ4OX5leHA9MTY5ODM3MDA4OX5obWFjPTkwMGIzMDllNmY5ZTU0ODcyNWE0YjUwZDMxMGM5NWI3MjZhNzU2MmRhOTFkMDE3NDU3ZDYwYWU1NzI2ZjlmZDhcIixcclxuICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICBcIkhhbGxvd2VlbiBicmluZ3Mgb3V0IGFsbCBtYW5uZXIgb2YgY3JlYXR1cmVzIGFuZCBzcGlyaXRzLiBGcm9tIHRoZSBkZWFkIG9mIG5pZ2h0IHRvIHRoZSBsaWdodCBvZiB0aGUgbW9vbiwgd2hpY2ggbXl0aGljYWwgYmVpbmcgc2VuZHMgc2hpdmVycyBkb3duIHlvdXIgc3BpbmUgdGhlIG1vc3Q/IENhc3QgeW91ciBzcGluZS1jaGlsbGluZyB2b3RlIG5vdyFcIixcclxuICAgIG9wdGlvbjE6IFwi8J+nm+KAjeKZgu+4jyBWYW1waXJlc1wiLFxyXG4gICAgb3B0aW9uMVZvdGVzOiA0NSxcclxuICAgIG9wdGlvbjI6IFwi8J+QuiBXZXJld29sdmVzXCIsXHJcbiAgICBvcHRpb24yVm90ZXM6IDQwLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiQ2xhc3NpYyB2cyBNb2Rlcm4gSG9ycm9yIE1vdmllc1wiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWcuZnJlZXBpay5jb20vZnJlZS12ZWN0b3IvZmxhdC1iYWNrZ3JvdW5kLWhhbGxvd2Vlbi1jZWxlYnJhdGlvbl8yMy0yMTQ5Njk4ODgwLmpwZz93PTEwNjAmdD1zdD0xNjk4MzY5NDk1fmV4cD0xNjk4MzcwMDk1fmhtYWM9MWMzYzRjMmU4OTdmYTg5ZThlZWQ5NmRhNjU0YjM1ZWM4MTZlY2YxZmJjZjI4Y2FiOWYzOGUxNWFlNDU1YjhiMlwiLFxyXG4gICAgZGVzY3JpcHRpb246XHJcbiAgICAgIFwiSG9ycm9yIGZpbG1zIGhhdmUgZXZvbHZlZCBvdmVyIHRoZSB5ZWFycywgZnJvbSBjbGFzc2ljIHNwaW5lLXRpbmdsZXJzIHRvIG1vZGVybiBwc3ljaG9sb2dpY2FsIHRocmlsbGVycy4gV2hpY2ggZXJhIG9mIGhvcnJvciBtb3ZpZXMga2VlcHMgeW91IHVwIGF0IG5pZ2h0PyBNYWtlIHlvdXIgZWVyaWUgY2hvaWNlIVwiLFxyXG4gICAgb3B0aW9uMTogXCLwn46lIENsYXNzaWMgSG9ycm9yc1wiLFxyXG4gICAgb3B0aW9uMVZvdGVzOiA1NSxcclxuICAgIG9wdGlvbjI6IFwi8J+Tve+4jyBNb2Rlcm4gVGhyaWxsZXJzXCIsXHJcbiAgICBvcHRpb24yVm90ZXM6IDUwLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiSWRlYWwgSGF1bnRlZCBMb2NhdGlvblwiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWcuZnJlZXBpay5jb20vZnJlZS12ZWN0b3IvaGFuZC1kcmF3bi1mbGF0LWhhbGxvd2Vlbi1iYWNrZ3JvdW5kXzIzLTIxNDkwNzc1NjkuanBnP3c9MTA2MCZ0PXN0PTE2OTgzNjk2NjJ+ZXhwPTE2OTgzNzAyNjJ+aG1hYz05OTA0NDM0ZmJiZDkzMDY0ODIzMDE5MTU2ZGZmODY1OGMzMWVmZjk1ZGYxZGMzZGRjNWI4NzNhNTY2MTJmNWQ4XCIsXHJcbiAgICBkZXNjcmlwdGlvbjpcclxuICAgICAgXCJUaGUgYWxsdXJlIG9mIGhhdW50ZWQgcGxhY2VzIGJlY2tvbnMgbWFueSB0aHJpbGwtc2Vla2Vycy4gRnJvbSBhYmFuZG9uZWQgbWFuc2lvbnMgdG8gZWVyaWUgZ3JhdmV5YXJkcywgd2hpY2ggaGF1bnRlZCBsb2NhdGlvbiB3b3VsZCB5b3UgZGFyZSB0byB2aXNpdCBvbiBhIEhhbGxvd2VlbiBuaWdodD8gVmVudHVyZSBmb3J0aCBhbmQgdm90ZSFcIixcclxuICAgIG9wdGlvbjE6IFwi8J+Pmu+4jyBIYXVudGVkIE1hbnNpb25cIixcclxuICAgIG9wdGlvbjFWb3RlczogNTMsXHJcbiAgICBvcHRpb24yOiBcIuKasO+4jyBDcmVlcHkgQ2VtZXRlcnlcIixcclxuICAgIG9wdGlvbjJWb3RlczogNDYsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJGYXZvcml0ZSBIYWxsb3dlZW4gVHJlYXRcIixcclxuICAgIGltYWdlOlxyXG4gICAgICBcImh0dHBzOi8vaW1nLmZyZWVwaWsuY29tL2ZyZWUtdmVjdG9yL2hhbGxvd2Vlbi1jYXQtZGlzZ3Vpc2VkLXNrdWxsLWNoYXJhY3Rlcl8yNDkwOC01OTU1Mi5qcGc/dz03NDAmdD1zdD0xNjk4MzY5NDk0fmV4cD0xNjk4MzcwMDk0fmhtYWM9ZmRiZGMyZmZiNjhhMzQwNWE0NTliMTVhYzY2ZDgxNDgzOTRkZjE0ZTM3ZmQwYTRhYzkwNTUxZTQxYmJiOGYwMVwiLFxyXG4gICAgZGVzY3JpcHRpb246XHJcbiAgICAgIFwiVHJpY2sgb3IgdHJlYXQhIEhhbGxvd2VlbiBpcyBpbmNvbXBsZXRlIHdpdGhvdXQgaXRzIHNoYXJlIG9mIHN3ZWV0IGluZHVsZ2VuY2VzLiBGcm9tIGNhbmR5IGNvcm4gdG8gY2hvY29sYXRlIGJhcnMsIHdoaWNoIHRyZWF0IHNhdGlzZmllcyB5b3VyIEhhbGxvd2VlbiBjcmF2aW5ncz8gU2hhcmUgeW91ciBzdWdhcnkgcHJlZmVyZW5jZSFcIixcclxuICAgIG9wdGlvbjE6IFwi8J+NrCBDYW5keSBDb3JuXCIsXHJcbiAgICBvcHRpb24xVm90ZXM6IDQ0LFxyXG4gICAgb3B0aW9uMjogXCLwn42rIENob2NvbGF0ZSBCYXJzXCIsXHJcbiAgICBvcHRpb24yVm90ZXM6IDQ5LFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiQmVzdCBIYWxsb3dlZW4gQ29zdHVtZSBUaGVtZVwiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWcuZnJlZXBpay5jb20vZnJlZS12ZWN0b3IvaGFsbG93ZWVuLWlsbHVzdHJhdGlvbi13aXRoLWJpZy1nbG93aW5nLW1vb24tYmFsbC1uaWdodC1zcGFya2xlLXNreS1iYXRzLW1hZ2ljLWZvcmVzdC1mbGF0XzEyODQtNDA3ODguanBnP3c9NzQwJnQ9c3Q9MTY5ODM2OTQ5Mn5leHA9MTY5ODM3MDA5Mn5obWFjPTJmYTM4N2RjNWI2NzNjYTE3YWFkZjdmYWQ0M2U1ODA4OWI2YWE3ZDY3NGQ1YjExMTUwODZhZDhjYmFjNjcyYWJcIixcclxuICAgIGRlc2NyaXB0aW9uOlxyXG4gICAgICBcIkRyZXNzaW5nIHVwIGZvciBIYWxsb3dlZW4gaXMgYSBjaGVyaXNoZWQgdHJhZGl0aW9uLiBXaGV0aGVyIHlvdSBsaWtlIHRvIGtlZXAgaXQgc3Bvb2t5IG9yIGdvIGZvciBzb21ldGhpbmcgZnVubnksIHdoaWNoIGNvc3R1bWUgdGhlbWUgd2lucyB5b3VyIGhlYXJ0PyBVbmxlYXNoIHlvdXIgaW5uZXIgZ2hvdWwgYW5kIGNhc3QgeW91ciB2b3RlIVwiLFxyXG4gICAgb3B0aW9uMTogXCLwn5KAIFNwb29reSBTa2VsZXRvbnNcIixcclxuICAgIG9wdGlvbjFWb3RlczogNTIsXHJcbiAgICBvcHRpb24yOiBcIvCfpKEgRnVubnkgQ2xvd25zXCIsXHJcbiAgICBvcHRpb24yVm90ZXM6IDQ1LFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiSGFsbG93ZWVuIEJhdHRsZTogVHJpY2sgb3IgVHJlYXQhXCIsXHJcbiAgICBpbWFnZTpcclxuICAgICAgXCJodHRwczovL2ltZy5mcmVlcGlrLmNvbS9mcmVlLXZlY3Rvci9kcmF3bi1oYWxsb3dlZW4tYmFja2dyb3VuZC13aXRoLXNjYXJ5LWNlbWV0ZXJ5XzUyNjgzLTQzNTQ2LmpwZz93PTEwNjAmdD1zdD0xNjk4MzY5NDkwfmV4cD0xNjk4MzcwMDkwfmhtYWM9ZjBkZTZjYzU1YmYzMDE4YTg3ZmI5ZmUzODA1MDhlMjdjOTM1ZDUwYTU0YWI3ZjRmZjEyYzFkNjA1ZTdhMjE3NVwiLFxyXG4gICAgZGVzY3JpcHRpb246IFwiSXQncyB0aW1lIHRvIGRlY2lkZSBvbmNlIGFuZCBmb3IgYWxsLlwiLFxyXG4gICAgb3B0aW9uMTogXCLwn46tIFRyaWNrXCIsXHJcbiAgICBvcHRpb24xVm90ZXM6IDYwLFxyXG4gICAgb3B0aW9uMjogXCLwn42tIFRyZWF0XCIsXHJcbiAgICBvcHRpb24yVm90ZXM6IDY1LFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgcG9sbFRlbXBsYXRlID0gXCIjcG9sbC10ZW1wbGF0ZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGlucHV0RWxlbWVudFNlbGVjdG9yOiBcIi5tb2RhbF9fdGV4dC1pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25TZWxlY3RvcjogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvclNlbGVjdG9yOiBcIm1vZGFsX19pbnB1dC1lcnJvcl92aXNpYmxlXCIsXHJcbiAgZXJyb3JTZWxlY3RvckhpZGU6IFwibW9kYWxfX2lucHV0LWVycm9yLWhpZGVcIixcclxuICBlcnJvclNlbGVjdG9yOiBcIm1vZGFsX19pbnB1dC1lcnJvclwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGROZXdQb2xsTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1uZXctcG9sbFwiKTtcclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBvbGxCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1uZXctcG9sbC1idXR0b25cIik7XHJcbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9sbCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb2xsLmpzXCI7XHJcbmltcG9ydCAqIGFzIGNvbnN0YW50IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmxldCBwb2xsU2VjdGlvbiA9IG51bGw7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJQb2xsKFxyXG4gIHsgdGl0bGUsIGRlc2NyaXB0aW9uLCBvcHRpb24xLCBvcHRpb24yLCBvcHRpb24xVm90ZXMsIG9wdGlvbjJWb3RlcywgaW1hZ2UgfSxcclxuICBwb2xsU2VsZWN0b3JcclxuKSB7XHJcbiAgY29uc3QgcG9sbCA9IG5ldyBQb2xsKFxyXG4gICAgeyB0aXRsZSwgZGVzY3JpcHRpb24sIG9wdGlvbjEsIG9wdGlvbjIsIG9wdGlvbjFWb3Rlcywgb3B0aW9uMlZvdGVzLCBpbWFnZSB9LFxyXG4gICAgcG9sbFNlbGVjdG9yXHJcbiAgKTtcclxuICByZXR1cm4gcG9sbC5nZXRQb2xsKCk7XHJcbn1cclxuXHJcbnBvbGxTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGNvbnN0YW50LnBvbGxzTGlzdCxcclxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICBwb2xsU2VjdGlvbi5hZGRJdGVtKHJlbmRlclBvbGwoZGF0YSwgXCIjcG9sbC10ZW1wbGF0ZVwiKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIucG9sbHNfX2xpc3RcIlxyXG4pO1xyXG5wb2xsU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuY29uc3QgYWRkTmV3UG9sbFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjYWRkLW5ldy1wb2xsXCIsXHJcbiAgaGFuZGxlQWRkTmV3UG9zdEZvcm1TdWJtaXQsXHJcbiAgXCIubW9kYWxfX2J1dHRvblwiXHJcbik7XHJcblxyXG4vL2luc3RhbnRpYXRlIEZvcm1WYWxpZGF0b3IgY2xhc3NcclxuY29uc3QgYWRkTmV3UG9sbEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25zdGFudC5zZXR0aW5ncyxcclxuICBjb25zdGFudC5hZGROZXdQb2xsTW9kYWxcclxuKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU9wZW5OZXdQb2xsRm9ybSgpIHtcclxuICBhZGROZXdQb2xsRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgYWRkTmV3UG9sbFBvcHVwLm9wZW5Nb2RhbCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGROZXdQb3N0Rm9ybVN1Ym1pdChwb2xsRGF0YSkge1xyXG4gIGNvbnN0IHBvbGxPYmogPSB7XHJcbiAgICAuLi5wb2xsRGF0YSxcclxuICAgIG9wdGlvbjFWb3RlczogMCxcclxuICAgIG9wdGlvbjJWb3RlczogMCxcclxuICB9O1xyXG4gIHBvbGxTZWN0aW9uLmFkZEl0ZW0ocmVuZGVyUG9sbChwb2xsT2JqLCBcIiNwb2xsLXRlbXBsYXRlXCIpKTtcclxuICBhZGROZXdQb2xsUG9wdXAuY2xvc2VNb2RhbCgpO1xyXG59XHJcblxyXG4vKiBFdmVudCBMaXN0ZW5lcnMgKi9cclxuY29uc3RhbnQuY3JlYXRlUG9sbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlT3Blbk5ld1BvbGxGb3JtKTtcclxuXHJcbi8qIEZvcm0gVmFsaWRhdGlvbnMgKi9cclxuYWRkTmV3UG9sbEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICAgICAgdGhpcy5fc2VjdGlvbi5wcmVwZW5kKGl0ZW0pO1xyXG4gICAgfTtcclxufTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cE1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBNb2RhbFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IHRoaXMuaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IHRoaXMuX3BvcHVwTW9kYWwucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fdGV4dC1pbnB1dFwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0RmllbGRzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fcG9wdXBNb2RhbC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX190ZXh0LWlucHV0XCIpXHJcbiAgICApO1xyXG4gICAgY29uc3QgcmVzdWx0ID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGlucHV0RmllbGRzKSB7XHJcbiAgICAgIHJlc3VsdFtmaWVsZFtcIm5hbWVcIl1dID0gZmllbGRbXCJ2YWx1ZVwiXTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAvLyBoZXJlIHlvdSBpbnNlcnQgdGhlIGB2YWx1ZWAgYnkgdGhlIGBuYW1lYCBvZiB0aGUgaW5wdXRcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZU1vZGFsKCkge1xyXG4gICAgc3VwZXIuY2xvc2VNb2RhbCgpO1xyXG4gICAgdGhpcy5fcG9wdXBNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtLWNvbnRlbnRcIikucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVN1Ym1pdCgpIHtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgfVxyXG5cclxuICBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwTW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLmhhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLmhhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dEVsZW1lbnRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0RXJyb3JTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0RXJyb3JTZWxlY3RvcjtcbiAgICB0aGlzLl9lcnJvclNlbGVjdG9ySGlkZSA9IHNldHRpbmdzLmVycm9yU2VsZWN0b3JIaWRlO1xuICAgIHRoaXMuX2Vycm9yU2VsZWN0b3IgPSBzZXR0aW5ncy5lcnJvclNlbGVjdG9yO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yU2VsZWN0b3IpO1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9KyAuJHt0aGlzLl9lcnJvclNlbGVjdG9yfWBcbiAgICApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yU2VsZWN0b3IpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JTZWxlY3Rvcik7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0rIC4ke3RoaXMuX2Vycm9yU2VsZWN0b3J9YFxuICAgICk7XG4gICAgLy8gZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JTZWxlY3RvckhpZGUpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JTZWxlY3Rvcik7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIHRvZ2dsZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhlIGZ1bmN0aW9uIHRha2VzIGFuIGFycmF5IG9mIGZvcm0gaW5wdXQgZmllbGRzXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBhcnJheSB1c2luZyB0aGUgc29tZSgpIG1ldGhvZFxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xuICB9XG5cbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gRmluZCBhbGwgdGhlIGZvcm0gZmllbGRzIGFuZCBtYWtlIGFuIGFycmF5IG9mIHRoZW1cbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0RWxlbWVudFNlbGVjdG9yKVxuICAgICk7XG4gICAgLy8gRmluZCB0aGUgc3VibWl0IGJ1dHRvbiBpbiB0aGUgY3VycmVudCBmb3JtXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICAvLyBDYW5jZWwgZGVmYXVsdCBiZWhhdmlvciBmb3IgZm9ybVxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIl0sIm5hbWVzIjpbIlBvcHVwIiwiY29uc3RydWN0b3IiLCJfcmVmIiwicG9wdXBNb2RhbFNlbGVjdG9yIiwidGhpcyIsIl9wb3B1cE1vZGFsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xvc2VNb2RhbCIsImJpbmQiLCJvcGVuTW9kYWwiLCJjbGFzc0xpc3QiLCJhZGQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmUiLCJfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlRXNjQ2xvc2UiLCJldnQiLCJrZXkiLCJfY2xvc2VNb2RhbEJ5Q2xpY2siLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbnMiLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlBvbGwiLCJwb2xsU2VsZWN0b3IiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwib3B0aW9uMSIsIm9wdGlvbjIiLCJvcHRpb24xVm90ZXMiLCJvcHRpb24yVm90ZXMiLCJpbWFnZSIsIl9wb2xsU2VsZWN0b3IiLCJfdGl0bGUiLCJfZGVzY3JpcHRpb24iLCJfaW1hZ2UiLCJfb3B0aW9uMSIsIl9vcHRpb24yIiwiX29wdGlvbjFWb3RlcyIsIl9vcHRpb24yVm90ZXMiLCJfcG9sbEVsZW1lbnQiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0bmVycyIsIl9vcHRpb25zQnV0dG9uMSIsImUiLCJ2b3RlIiwiX29wdGlvbnNCdXR0b24yIiwib3B0aW9uIiwicmVuZGVyVm90ZXMiLCJfZ2V0SW1hZ2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJfb3B0aW9uMVZvdGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJfb3B0aW9uMlZvdGVFbGVtZW50IiwiZ2V0UG9sbCIsInNyYyIsInNldHRpbmdzIiwiaW5wdXRFbGVtZW50U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVycm9yU2VsZWN0b3IiLCJlcnJvclNlbGVjdG9ySGlkZSIsImVycm9yU2VsZWN0b3IiLCJhZGROZXdQb2xsTW9kYWwiLCJjcmVhdGVQb2xsQnV0dG9uIiwicG9sbFNlY3Rpb24iLCJyZW5kZXJQb2xsIiwic2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX3NlbGVjdG9yIiwiX3NlY3Rpb24iLCJyZW5kZXJJdGVtcyIsImZvckVhY2giLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJkYXRhIiwiYWRkTmV3UG9sbFBvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJoYW5kbGVTdWJtaXQiLCJfaW5wdXRGaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRGaWVsZHMiLCJBcnJheSIsImZyb20iLCJyZXN1bHQiLCJmaWVsZCIsInNldElucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsIm5hbWUiLCJyZXNldCIsInBvbGxEYXRhIiwicG9sbE9iaiIsImFkZE5ld1BvbGxGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJfZm9ybSIsIl9pbnB1dEVsZW1lbnRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvblNlbGVjdG9yIiwiX2lucHV0RXJyb3JTZWxlY3RvciIsIl9lcnJvclNlbGVjdG9ySGlkZSIsIl9lcnJvclNlbGVjdG9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsIl9oaWRlSW5wdXRFcnJvciIsInRvZ2dsZUlucHV0RXJyb3IiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dExpc3QiLCJzb21lIiwiX2VuYWJsZUJ1dHRvbiIsIl9idXR0b25FbGVtZW50IiwicmVtb3ZlQXR0cmlidXRlIiwiZGlzYWJsZUJ1dHRvbiIsInNldEF0dHJpYnV0ZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImNvbnN0YW50Il0sInNvdXJjZVJvb3QiOiIifQ==